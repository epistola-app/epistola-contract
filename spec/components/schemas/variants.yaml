VariantDto:
  type: object
  description: Full template variant with version summary
  required:
    - id
    - templateId
    - attributes
    - isDefault
    - hasDraft
    - publishedVersions
    - createdAt
    - lastModified
  properties:
    id:
      type: string
      pattern: '^[a-z][a-z0-9]*(-[a-z0-9]+)*$'
      minLength: 3
      maxLength: 50
      description: Slug identifier of the variant
      example: english
    templateId:
      type: string
      pattern: '^[a-z][a-z0-9]*(-[a-z0-9]+)*$'
      minLength: 3
      maxLength: 50
      description: Slug identifier of the template this variant belongs to
      example: invoice
    title:
      type:
        - string
        - 'null'
      description: Human-readable title for the variant
      example: English Invoice
    description:
      type:
        - string
        - 'null'
      description: Description of the variant
      example: English language invoice for international customers
    attributes:
      type: object
      additionalProperties:
        type: string
      description: Variant attributes for selection criteria (e.g., language=dutch, brand=acme)
      example:
        locale: en-US
        brand: acme
    isDefault:
      type: boolean
      description: Whether this variant is the default for its template
      example: false
    hasDraft:
      type: boolean
      description: Whether this variant has an unpublished draft
      example: true
    publishedVersions:
      type: array
      items:
        type: integer
      description: List of published version numbers
      example: [1, 2]
    createdAt:
      type: string
      format: date-time
      description: Timestamp when the variant was created
      example: "2026-01-21T10:00:00Z"
    lastModified:
      type: string
      format: date-time
      description: Timestamp when the variant was last modified
      example: "2026-01-28T11:30:00Z"
  example:
    id: english
    templateId: invoice
    title: English Invoice
    description: English language invoice for international customers
    attributes:
      locale: en-US
      brand: acme
    isDefault: false
    hasDraft: true
    publishedVersions: [1, 2]
    createdAt: "2026-01-21T10:00:00Z"
    lastModified: "2026-01-28T11:30:00Z"

VariantSummaryDto:
  type: object
  description: Summary view of a variant for inclusion in template responses
  required:
    - id
    - attributes
    - isDefault
    - hasDraft
    - publishedVersions
  properties:
    id:
      type: string
      pattern: '^[a-z][a-z0-9]*(-[a-z0-9]+)*$'
      minLength: 3
      maxLength: 50
      description: Slug identifier of the variant
      example: english
    title:
      type:
        - string
        - 'null'
      description: Human-readable title for the variant
      example: English Invoice
    attributes:
      type: object
      additionalProperties:
        type: string
      description: Variant attributes for selection criteria
      example:
        locale: en-US
        brand: acme
    isDefault:
      type: boolean
      description: Whether this variant is the default for its template
      example: false
    hasDraft:
      type: boolean
      description: Whether this variant has an unpublished draft
      example: true
    publishedVersions:
      type: array
      items:
        type: integer
      description: List of published version numbers
      example: [1, 2]
  example:
    id: english
    title: English Invoice
    attributes:
      locale: en-US
      brand: acme
    isDefault: false
    hasDraft: true
    publishedVersions: [1, 2]

CreateVariantRequest:
  type: object
  description: Request body for creating a new variant
  required:
    - id
  properties:
    id:
      type: string
      pattern: '^[a-z][a-z0-9]*(-[a-z0-9]+)*$'
      minLength: 3
      maxLength: 50
      description: Client-provided slug identifier for the variant
      example: english
    title:
      type:
        - string
        - 'null'
      description: Human-readable title for the variant
      example: English Invoice
    description:
      type:
        - string
        - 'null'
      description: Description of the variant
      example: English language invoice for international customers
    attributes:
      type: object
      additionalProperties:
        type: string
      description: Variant attributes for selection criteria for this variant
      example:
        locale: en-US
        brand: acme

UpdateVariantRequest:
  type: object
  description: Request body for updating a variant
  properties:
    title:
      type:
        - string
        - 'null'
      description: Human-readable title for the variant
      example: English Invoice (Updated)
    description:
      type:
        - string
        - 'null'
      description: Description of the variant
      example: Updated English language invoice
    attributes:
      type: object
      additionalProperties:
        type: string
      description: Updated attributes for this variant
      example:
        locale: en-US
        brand: acme
        region: north-america

VariantListResponse:
  type: object
  description: List of template variants
  required:
    - items
  properties:
    items:
      type: array
      description: List of variants
      items:
        $ref: '#/VariantDto'
  example:
    items:
      - id: english
        templateId: invoice
        title: English Invoice
        description: English language invoice for international customers
        attributes:
          locale: en-US
          brand: acme
        hasDraft: true
        publishedVersions: [1, 2]
        createdAt: "2026-01-21T10:00:00Z"
        lastModified: "2026-01-28T11:30:00Z"

ActivationDto:
  type: object
  description: Environment activation for a variant. versionId IS the version number (1-200).
  required:
    - environmentId
    - environmentName
    - versionId
    - activatedAt
  properties:
    environmentId:
      type: string
      pattern: '^[a-z][a-z0-9]*(-[a-z0-9]+)*$'
      minLength: 3
      maxLength: 30
      description: Slug identifier of the environment
      example: production
    environmentName:
      type: string
      description: Name of the environment
      example: Production
    versionId:
      type: integer
      minimum: 1
      maximum: 200
      description: ID of the active version (also the version number, 1-200)
      example: 1
    activatedAt:
      type: string
      format: date-time
      description: Timestamp when this version was activated
      example: "2026-01-28T12:00:00Z"
  example:
    environmentId: production
    environmentName: Production
    versionId: 1
    activatedAt: "2026-01-28T12:00:00Z"

SetActivationRequest:
  type: object
  description: Request body for setting the active version for an environment
  required:
    - versionId
  properties:
    versionId:
      type: integer
      minimum: 1
      maximum: 200
      description: ID of the version to activate (version number, 1-200)
      example: 1

ActivationListResponse:
  type: object
  description: List of environment activations for a variant
  required:
    - items
  properties:
    items:
      type: array
      description: List of activations
      items:
        $ref: '#/ActivationDto'
  example:
    items:
      - environmentId: production
        environmentName: Production
        versionId: 1
        activatedAt: "2026-01-28T12:00:00Z"
      - environmentId: staging
        environmentName: Staging
        versionId: 2
        activatedAt: "2026-01-29T09:00:00Z"
